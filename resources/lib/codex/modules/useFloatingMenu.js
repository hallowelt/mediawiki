"use strict";var Lt=Object.defineProperty,Dt=Object.defineProperties;var St=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var st=(t,e,n)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||(e={}))lt.call(e,n)&&st(t,n,e[n]);if(z)for(var n of z(e))ct.call(e,n)&&st(t,n,e[n]);return t},T=(t,e)=>Dt(t,St(e));var G=(t,e)=>{var n={};for(var o in t)lt.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&z)for(var o of z(t))e.indexOf(o)<0&&ct.call(t,o)&&(n[o]=t[o]);return n};var W=(t,e,n)=>new Promise((o,r)=>{var s=c=>{try{a(n.next(c))}catch(i){r(i)}},l=c=>{try{a(n.throw(c))}catch(i){r(i)}},a=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,l);a((n=n.apply(t,e)).next())});const h=require("vue"),At=["top","right","bottom","left"],I=Math.min,L=Math.max,X=Math.round,j=Math.floor,B=t=>({x:t,y:t});function Q(t,e){return typeof t=="function"?t(e):t}function Z(t){return t.split("-")[0]}function yt(t){return t.split("-")[1]}function Ft(t){return t==="x"?"y":"x"}function Ht(t){return t==="y"?"height":"width"}function tt(t){return["top","bottom"].includes(Z(t))?"y":"x"}function Mt(t){return Ft(tt(t))}function Bt(t){return O({top:0,right:0,bottom:0,left:0},t)}function Nt(t){return typeof t!="number"?Bt(t):{top:t,right:t,bottom:t,left:t}}function Y(t){return T(O({},t),{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}function at(t,e,n){let{reference:o,floating:r}=t;const s=tt(e),l=Mt(e),a=Ht(l),c=Z(e),i=s==="y",u=o.x+o.width/2-r.width/2,f=o.y+o.height/2-r.height/2,m=o[a]/2-r[a]/2;let d;switch(c){case"top":d={x:u,y:o.y-r.height};break;case"bottom":d={x:u,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:f};break;case"left":d={x:o.x-r.width,y:f};break;default:d={x:o.x,y:o.y}}switch(yt(e)){case"start":d[l]-=m*(n&&i?-1:1);break;case"end":d[l]+=m*(n&&i?-1:1);break}return d}const Vt=(t,e,n)=>W(exports,null,function*(){const{placement:o="bottom",strategy:r="absolute",middleware:s=[],platform:l}=n,a=s.filter(Boolean),c=yield l.isRTL==null?void 0:l.isRTL(e);let i=yield l.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:f}=at(i,o,c),m=o,d={},p=0;for(let w=0;w<a.length;w++){const{name:v,fn:g}=a[w],{x,y:R,data:C,reset:b}=yield g({x:u,y:f,initialPlacement:o,placement:m,strategy:r,middlewareData:d,rects:i,platform:l,elements:{reference:t,floating:e}});if(u=x!=null?x:u,f=R!=null?R:f,d=T(O({},d),{[v]:O(O({},d[v]),C)}),b&&p<=50){p++,typeof b=="object"&&(b.placement&&(m=b.placement),b.rects&&(i=b.rects===!0?yield l.getElementRects({reference:t,floating:e,strategy:r}):b.rects),{x:u,y:f}=at(i,m,c)),w=-1;continue}}return{x:u,y:f,placement:m,strategy:r,middlewareData:d}});function J(t,e){return W(this,null,function*(){var n;e===void 0&&(e={});const{x:o,y:r,platform:s,rects:l,elements:a,strategy:c}=t,{boundary:i="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:d=0}=Q(e,t),p=Nt(d),v=a[m?f==="floating"?"reference":"floating":f],g=Y(yield s.getClippingRect({element:(n=yield s.isElement==null?void 0:s.isElement(v))==null||n?v:v.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:i,rootBoundary:u,strategy:c})),x=f==="floating"?T(O({},l.floating),{x:o,y:r}):l.reference,R=yield s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating),C=(yield s.isElement==null?void 0:s.isElement(R))?(yield s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},b=Y(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:R,strategy:c}):x);return{top:(g.top-b.top+p.top)/C.y,bottom:(b.bottom-g.bottom+p.bottom)/C.y,left:(g.left-b.left+p.left)/C.x,right:(b.right-g.right+p.right)/C.x}})}function ut(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ft(t){return At.some(e=>t[e]>=0)}const dt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,fn(n){return W(this,null,function*(){const{rects:o}=n,l=Q(t,n),{strategy:r="referenceHidden"}=l,s=G(l,["strategy"]);switch(r){case"referenceHidden":{const a=yield J(n,T(O({},s),{elementContext:"reference"})),c=ut(a,o.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:ft(c)}}}case"escaped":{const a=yield J(n,T(O({},s),{altBoundary:!0})),c=ut(a,o.floating);return{data:{escapedOffsets:c,escaped:ft(c)}}}default:return{}}})}}},Wt=function(t){return t===void 0&&(t={}),{name:"size",options:t,fn(n){return W(this,null,function*(){const{placement:o,rects:r,platform:s,elements:l}=n,y=Q(t,n),{apply:a=()=>{}}=y,c=G(y,["apply"]),i=yield J(n,c),u=Z(o),f=yt(o),m=tt(o)==="y",{width:d,height:p}=r.floating;let w,v;u==="top"||u==="bottom"?(w=u,v=f===((yield s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(v=u,w=f==="end"?"top":"bottom");const g=p-i[w],x=d-i[v],R=!n.middlewareData.shift;let C=g,b=x;if(m){const S=d-i.left-i.right;b=f||R?I(x,S):S}else{const S=p-i.top-i.bottom;C=f||R?I(g,S):S}if(R&&!f){const S=L(i.left,0),P=L(i.right,0),it=L(i.top,0),rt=L(i.bottom,0);m?b=d-2*(S!==0||P!==0?S+P:L(i.left,i.right)):C=p-2*(it!==0||rt!==0?it+rt:L(i.top,i.bottom))}yield a(T(O({},n),{availableWidth:b,availableHeight:C}));const M=yield s.getDimensions(l.floating);return d!==M.width||p!==M.height?{reset:{rects:!0}}:{}})}}};function N(t){return vt(t)?(t.nodeName||"").toLowerCase():"#document"}function E(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function H(t){var e;return(e=(vt(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vt(t){return t instanceof Node||t instanceof E(t).Node}function F(t){return t instanceof Element||t instanceof E(t).Element}function A(t){return t instanceof HTMLElement||t instanceof E(t).HTMLElement}function ht(t){return typeof ShadowRoot=="undefined"?!1:t instanceof ShadowRoot||t instanceof E(t).ShadowRoot}function _(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=D(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(r)}function $t(t){return["table","td","th"].includes(N(t))}function et(t){const e=nt(),n=D(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function kt(t){let e=k(t);for(;A(e)&&!U(e);){if(et(e))return e;e=k(e)}return null}function nt(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function U(t){return["html","body","#document"].includes(N(t))}function D(t){return E(t).getComputedStyle(t)}function K(t){return F(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function k(t){if(N(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ht(t)&&t.host||H(t);return ht(e)?e.host:e}function xt(t){const e=k(t);return U(e)?t.ownerDocument?t.ownerDocument.body:t.body:A(e)&&_(e)?e:xt(e)}function q(t,e){var n;e===void 0&&(e=[]);const o=xt(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),s=E(o);return r?e.concat(s,s.visualViewport||[],_(o)?o:[]):e.concat(o,q(o))}function bt(t){const e=D(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=A(t),s=r?t.offsetWidth:n,l=r?t.offsetHeight:o,a=X(n)!==s||X(o)!==l;return a&&(n=s,o=l),{width:n,height:o,$:a}}function ot(t){return F(t)?t:t.contextElement}function $(t){const e=ot(t);if(!A(e))return B(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:s}=bt(e);let l=(s?X(n.width):n.width)/o,a=(s?X(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!a||!Number.isFinite(a))&&(a=1),{x:l,y:a}}const Pt=B(0);function Rt(t){const e=E(t);return!nt()||!e.visualViewport?Pt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function It(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==E(t)?!1:e}function V(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=ot(t);let l=B(1);e&&(o?F(o)&&(l=$(o)):l=$(t));const a=It(s,n,o)?Rt(s):B(0);let c=(r.left+a.x)/l.x,i=(r.top+a.y)/l.y,u=r.width/l.x,f=r.height/l.y;if(s){const m=E(s),d=o&&F(o)?E(o):o;let p=m.frameElement;for(;p&&o&&d!==m;){const w=$(p),v=p.getBoundingClientRect(),g=D(p),x=v.left+(p.clientLeft+parseFloat(g.paddingLeft))*w.x,R=v.top+(p.clientTop+parseFloat(g.paddingTop))*w.y;c*=w.x,i*=w.y,u*=w.x,f*=w.y,c+=x,i+=R,p=E(p).frameElement}}return Y({width:u,height:f,x:c,y:i})}function _t(t){let{rect:e,offsetParent:n,strategy:o}=t;const r=A(n),s=H(n);if(n===s)return e;let l={scrollLeft:0,scrollTop:0},a=B(1);const c=B(0);if((r||!r&&o!=="fixed")&&((N(n)!=="body"||_(s))&&(l=K(n)),A(n))){const i=V(n);a=$(n),c.x=i.x+n.clientLeft,c.y=i.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-l.scrollLeft*a.x+c.x,y:e.y*a.y-l.scrollTop*a.y+c.y}}function zt(t){return Array.from(t.getClientRects())}function Ot(t){return V(H(t)).left+K(t).scrollLeft}function jt(t){const e=H(t),n=K(t),o=t.ownerDocument.body,r=L(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),s=L(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let l=-n.scrollLeft+Ot(t);const a=-n.scrollTop;return D(o).direction==="rtl"&&(l+=L(e.clientWidth,o.clientWidth)-r),{width:r,height:s,x:l,y:a}}function Xt(t,e){const n=E(t),o=H(t),r=n.visualViewport;let s=o.clientWidth,l=o.clientHeight,a=0,c=0;if(r){s=r.width,l=r.height;const i=nt();(!i||i&&e==="fixed")&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:l,x:a,y:c}}function Yt(t,e){const n=V(t,!0,e==="fixed"),o=n.top+t.clientTop,r=n.left+t.clientLeft,s=A(t)?$(t):B(1),l=t.clientWidth*s.x,a=t.clientHeight*s.y,c=r*s.x,i=o*s.y;return{width:l,height:a,x:c,y:i}}function pt(t,e,n){let o;if(e==="viewport")o=Xt(t,n);else if(e==="document")o=jt(H(t));else if(F(e))o=Yt(e,n);else{const r=Rt(t);o=T(O({},e),{x:e.x-r.x,y:e.y-r.y})}return Y(o)}function Ct(t,e){const n=k(t);return n===e||!F(n)||U(n)?!1:D(n).position==="fixed"||Ct(n,e)}function qt(t,e){const n=e.get(t);if(n)return n;let o=q(t).filter(a=>F(a)&&N(a)!=="body"),r=null;const s=D(t).position==="fixed";let l=s?k(t):t;for(;F(l)&&!U(l);){const a=D(l),c=et(l);!c&&a.position==="fixed"&&(r=null),(s?!c&&!r:!c&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||_(l)&&!c&&Ct(t,l))?o=o.filter(u=>u!==l):r=a,l=k(l)}return e.set(t,o),o}function Ut(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const l=[...n==="clippingAncestors"?qt(e,this._c):[].concat(n),o],a=l[0],c=l.reduce((i,u)=>{const f=pt(e,u,r);return i.top=L(f.top,i.top),i.right=I(f.right,i.right),i.bottom=I(f.bottom,i.bottom),i.left=L(f.left,i.left),i},pt(e,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Kt(t){return bt(t)}function Gt(t,e,n){const o=A(e),r=H(e),s=n==="fixed",l=V(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=B(0);if(o||!o&&!s)if((N(e)!=="body"||_(r))&&(a=K(e)),o){const i=V(e,!0,s,e);c.x=i.x+e.clientLeft,c.y=i.y+e.clientTop}else r&&(c.x=Ot(r));return{x:l.left+a.scrollLeft-c.x,y:l.top+a.scrollTop-c.y,width:l.width,height:l.height}}function gt(t,e){return!A(t)||D(t).position==="fixed"?null:e?e(t):t.offsetParent}function Et(t,e){const n=E(t);if(!A(t))return n;let o=gt(t,e);for(;o&&$t(o)&&D(o).position==="static";)o=gt(o,e);return o&&(N(o)==="html"||N(o)==="body"&&D(o).position==="static"&&!et(o))?n:o||kt(t)||n}const Jt=function(t){return W(this,null,function*(){let{reference:e,floating:n,strategy:o}=t;const r=this.getOffsetParent||Et,s=this.getDimensions;return{reference:Gt(e,yield r(n),o),floating:O({x:0,y:0},yield s(n))}})};function Qt(t){return D(t).direction==="rtl"}const Zt={convertOffsetParentRelativeRectToViewportRelativeRect:_t,getDocumentElement:H,getClippingRect:Ut,getOffsetParent:Et,getElementRects:Jt,getClientRects:zt,getDimensions:Kt,getScale:$,isElement:F,isRTL:Qt};function te(t,e){let n=null,o;const r=H(t);function s(){clearTimeout(o),n&&n.disconnect(),n=null}function l(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const{left:i,top:u,width:f,height:m}=t.getBoundingClientRect();if(a||e(),!f||!m)return;const d=j(u),p=j(r.clientWidth-(i+f)),w=j(r.clientHeight-(u+m)),v=j(i),x={rootMargin:-d+"px "+-p+"px "+-w+"px "+-v+"px",threshold:L(0,I(1,c))||1};let R=!0;function C(b){const M=b[0].intersectionRatio;if(M!==c){if(!R)return l();M?l(!1,M):o=setTimeout(()=>{l(!1,1e-7)},100)}R=!1}try{n=new IntersectionObserver(C,T(O({},x),{root:r.ownerDocument}))}catch(b){n=new IntersectionObserver(C,x)}n.observe(t)}return l(!0),s}function ee(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,i=ot(t),u=r||s?[...i?q(i):[],...q(e)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const f=i&&a?te(i,n):null;let m=-1,d=null;l&&(d=new ResizeObserver(g=>{let[x]=g;x&&x.target===i&&d&&(d.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{d&&d.observe(e)})),n()}),i&&!c&&d.observe(i),d.observe(e));let p,w=c?V(t):null;c&&v();function v(){const g=V(t);w&&(g.x!==w.x||g.y!==w.y||g.width!==w.width||g.height!==w.height)&&n(),w=g,p=requestAnimationFrame(v)}return n(),()=>{u.forEach(g=>{r&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),f&&f(),d&&d.disconnect(),d=null,c&&cancelAnimationFrame(p)}}const ne=(t,e,n)=>{const o=new Map,r=O({platform:Zt},n),s=T(O({},r.platform),{_c:o});return Vt(t,e,T(O({},r),{platform:s}))};function mt(t){var e;return(e=t==null?void 0:t.$el)!=null?e:t}function Tt(t){return typeof window=="undefined"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wt(t,e){const n=Tt(t);return Math.round(e*n)/n}function oe(t,e,n){n===void 0&&(n={});const o=n.whileElementsMounted,r=h.computed(()=>{var y;return(y=h.unref(n.open))!=null?y:!0}),s=h.computed(()=>h.unref(n.middleware)),l=h.computed(()=>{var y;return(y=h.unref(n.placement))!=null?y:"bottom"}),a=h.computed(()=>{var y;return(y=h.unref(n.strategy))!=null?y:"absolute"}),c=h.computed(()=>{var y;return(y=h.unref(n.transform))!=null?y:!0}),i=h.computed(()=>mt(t.value)),u=h.computed(()=>mt(e.value)),f=h.ref(0),m=h.ref(0),d=h.ref(a.value),p=h.ref(l.value),w=h.shallowRef({}),v=h.ref(!1),g=h.computed(()=>{const y={position:d.value,left:"0",top:"0"};if(!u.value)return y;const S=wt(u.value,f.value),P=wt(u.value,m.value);return c.value?O(T(O({},y),{transform:"translate("+S+"px, "+P+"px)"}),Tt(u.value)>=1.5&&{willChange:"transform"}):{position:d.value,left:S+"px",top:P+"px"}});let x;function R(){i.value==null||u.value==null||ne(i.value,u.value,{middleware:s.value,placement:l.value,strategy:a.value}).then(y=>{f.value=y.x,m.value=y.y,d.value=y.strategy,p.value=y.placement,w.value=y.middlewareData,v.value=!0})}function C(){typeof x=="function"&&(x(),x=void 0)}function b(){if(C(),o===void 0){R();return}if(i.value!=null&&u.value!=null){x=o(i.value,u.value,R);return}}function M(){r.value||(v.value=!1)}return h.watch([s,l,a],R,{flush:"sync"}),h.watch([i,u],b,{flush:"sync"}),h.watch(r,M,{flush:"sync"}),h.getCurrentScope()&&h.onScopeDispose(C),{x:h.shallowReadonly(f),y:h.shallowReadonly(m),strategy:h.shallowReadonly(d),placement:h.shallowReadonly(p),middlewareData:h.shallowReadonly(w),isPositioned:h.shallowReadonly(v),floatingStyles:g,update:R}}function ie(t,e){const n=()=>{var i;return(i=e.value)==null?void 0:i.isExpanded()},o=[Wt({apply({rects:i,elements:u}){Object.assign(u.floating.style,{width:"".concat(i.reference.width,"px")})}}),dt({strategy:"escaped"}),dt()],{floatingStyles:r,middlewareData:s,update:l}=oe(t,e,{middleware:o}),a=h.computed(()=>{var u,f;return!n()||!!((u=s.value.hide)!=null&&u.escaped)||((f=s.value.hide)==null?void 0:f.referenceHidden)?"hidden":"visible"});h.watch([r,a],([i,u])=>{var f,m;Object.assign((f=e.value)==null?void 0:f.$el.style,{visibility:u,position:i.position,top:"".concat(i.top,"px"),right:"unset",left:"".concat(i.left,"px"),transform:(m=i.transform)!=null?m:"none"})});let c=null;h.watch(n,i=>{var u;i?c=ee(t.value&&"$el"in t.value?t.value.$el:t,(u=e.value)==null?void 0:u.$el,l):c&&(c(),c=null)})}exports.useFloatingMenu=ie;
